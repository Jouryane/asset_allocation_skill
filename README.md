# asset_allocation_skill
通过把资产配置降维的方法，把资产配置从策略转化为战术，做成AI理财管家

# Asset Allocation basic
负责阐述这套资产配置思想，引导用户学会使用它，并且严格遵循合规，也会提供使用进阶分析的关键词。
# Aggressive Asset Allocation strategy
负责执行战术，从用户关注的若干指数中找出根据某一投资策略(这里用的是低估值、高安全边际的传统策略，实际上完全可以引入低频量化策略进行丰富)，找出用户关注的这些指数中，性价比最高的几个etf，并且结合市场整体情况进行仓位控制，最后把方案推送给用户(钉钉机器人)
	
# 其它
用户可以在config.yaml文件调整自己关注的投资标的；
可以在etf_selector.py 调整选品逻辑；
可以在strategy.py调整仓位控制逻辑；
可以在dingding.py调整输出话术和机器人地址。

# 一些展望
当前主要卖方，无论是券商投顾、银行理财经理还是其它卖方角色，他们的工作本质上是一种围绕着"销售标的"输出"销售逻辑"的过程，而资产配置理论是这个过程中常用的一种"销售逻辑"，只不过这种逻辑可能更加合理、更加立足于客户视角、更加有利于客户权益。也就是说差异化或者优化的空间可以围绕着config.yaml的内容进行改变、也可以围绕着etf_selector.py调整不同时间节点或合作下的选品思路、也可以结合strategy.py协助进行再平衡、也可以调整dingding.py的内容调整话术风格。也就是说这个逻辑似乎可以实现金融行业销售人员的投顾转型。


# 20260223更新
增加了一些文件，现在可以利用本地数据（示例文件中本地数据存储在A_data文件夹，包括申万一级行业、二级行业的估值、价格、交易量等数据），将低频量化策实现转化为更加迅速、更具备实操价值的AI资产配置投顾策略，具体步骤如下：
### 步骤1：用户画像解析
1. 输入 ：用户提供的个人信息（年龄、收入、投资经验、资金规模等）
2. 处理 ： user_profile_parser.py 中的 parse_user_profile() 函数
3. 输出 ：结构化的用户画像字典，包含age、annual_income、total_capital等字段
### 步骤2：进取系数计算
1. 输入 ：用户画像字典
2. 处理 ：
   - 根据年龄推断职业生涯阶段（36岁 → 职业生涯稳健期）
   - 根据风险偏好映射到配置中的键（丰富投资经验 → 高风险）
   - 从 config.yaml 的appropriateness_matrix获取进取类投资比例
3. 输出 ：进取系数（0.8）、进取类投资资金（600万 × 0.8 = 480万）
### 步骤3：智能选品器选择
1. 输入 ：用户画像字典、市场状态（可选）
2. 处理 ： intelligent_selector_router.py 中的 intelligent_select() 函数，从5个维度评估：
   - 资金规模（30%权重）
   - 风险偏好（25%权重）
   - 投资经验（20%权重）
   - 市场状态（15%权重）
   - 分散化需求（10%权重）
3. 输出 ：选中的选品器类型（SW_LV2）、详细评分信息
### 步骤4：非线性两步法ETF投资策略执行
1. 初始化 ：创建 NonlinearTwoStepInvestmentStrategy 实例
2. 第一步：宏观仓位控制
   - 计算全市场估值分位（加权百分位）
   - 通过非线性函数（Sigmoid）映射到仓位
   - 确定可用资金和闲置资金
3. 第二步：标的筛选与权重分配
   - 加载ETF数据
   - 计算各ETF估值分位
   - 使用非线性权重分配（指数函数放大估值差异）
   - 生成投资计划
### 步骤5：结果生成与推送
1. 投资方案 ：生成包含ETF名称、代码、估值分位、权重、投资金额等的详细计划
2. 保守类资产配置 ：根据剩余资金配置货币基金、债券基金、银行理财
3. 结果推送 ：可选通过dingding.py推送到钉钉机器人
